!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/http"),require("rxjs/add/operator/catch"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/add/operator/map"),require("rxjs/Rx"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","@angular/http","rxjs/add/operator/catch","rxjs/Observable","rxjs/Subject","rxjs/add/operator/map","rxjs/Rx","@angular/common"],e):e(t.ng2Completer=t.ng2Completer||{},t.ng.core,t.ng.forms,t.ng.http,t.Rx.Operator.catch,t.Rx,t.Rx,t.Rx.Operator.map,t.Rx,t.ng.common)}(this,function(t,e,r,i,o,n,s,c,l,p){"use strict";function a(){return function(){return new t.LocalData}}function h(t){return function(){return new F(t)}}var u=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};t.CtrCompleter=function(){function t(){this.selected=new e.EventEmitter,this.highlighted=new e.EventEmitter,this._hasHighlited=!1,this.hasSelected=!1}return t.prototype.ngOnInit=function(){},t.prototype.registerList=function(t){this.list=t},t.prototype.registerDropdown=function(t){this.dropdown=t},t.prototype.onHighlighted=function(t){this.highlighted.emit(t),this._hasHighlited=!!t},t.prototype.onSelected=function(t){this.selected.emit(t),this.hasSelected=!0,this.clear()},t.prototype.search=function(t){this.hasSelected&&(this.selected.emit(null),this.hasSelected=!1),this.list&&this.list.search(t)},t.prototype.clear=function(){this.dropdown&&this.dropdown.clear(),this.list&&this.list.clear(),this._hasHighlited=!1},t.prototype.selectCurrent=function(){this.dropdown&&this.dropdown.selectCurrent()},t.prototype.nextRow=function(){this.dropdown&&this.dropdown.nextRow()},t.prototype.prevRow=function(){this.dropdown&&this.dropdown.prevRow()},t.prototype.hasHighlited=function(){return this._hasHighlited},t}(),u([e.Output(),d("design:type",Object)],t.CtrCompleter.prototype,"selected",void 0),u([e.Output(),d("design:type",Object)],t.CtrCompleter.prototype,"highlighted",void 0),t.CtrCompleter=u([e.Directive({selector:"[ctrCompleter]"}),d("design:paramtypes",[])],t.CtrCompleter);var f=524288,m=3,g=250,y="Searching...",v="No results found",C=100,b=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},w=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},S=function(){},R={provide:r.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return t.CompleterCmp}),multi:!0};t.CompleterCmp=function(){function t(){this.inputName="",this.pause=g,this.minSearchLength=m,this.maxChars=f,this.overrideSuggested=!1,this.clearSelected=!1,this.fillHighlighted=!0,this.placeholder="",this.textSearching=y,this.textNoResults=v,this.autoMatch=!1,this.disableInput=!1,this.autofocus=!1,this.selected=new e.EventEmitter,this.highlighted=new e.EventEmitter,this.blur=new e.EventEmitter,this.searchStr="",this.control=new r.FormControl(""),this.displaySearching=!0,this._onTouchedCallback=S,this._onChangeCallback=S}return Object.defineProperty(t.prototype,"value",{get:function(){return this.searchStr},set:function(t){t!==this.searchStr&&(this.searchStr=t),this._onChangeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.onTouched=function(){this._onTouchedCallback()},t.prototype.writeValue=function(t){this.searchStr=t},t.prototype.registerOnChange=function(t){this._onChangeCallback=t},t.prototype.registerOnTouched=function(t){this._onTouchedCallback=t},t.prototype.ngOnInit=function(){var t=this;this.completer.selected.subscribe(function(e){var r=e?e.title:"";t.selected.emit(e),t._onChangeCallback(r)}),this.completer.highlighted.subscribe(function(e){t.highlighted.emit(e)}),"false"===this.textSearching&&(this.displaySearching=!1)},t.prototype.onBlur=function(){this.blur.emit(),this.onTouched()},t.prototype.onChange=function(t){this.value=t},t.prototype.open=function(t){void 0===t&&(t=""),this.completer.search(t)},t.prototype.close=function(){this.completer.clear()},t}(),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"dataService",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"inputName",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"pause",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"minSearchLength",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"maxChars",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"overrideSuggested",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"clearSelected",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"fillHighlighted",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"placeholder",void 0),b([e.Input(),w("design:type",String)],t.CompleterCmp.prototype,"matchClass",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"textSearching",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"textNoResults",void 0),b([e.Input(),w("design:type",Number)],t.CompleterCmp.prototype,"fieldTabindex",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"autoMatch",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"disableInput",void 0),b([e.Input(),w("design:type",String)],t.CompleterCmp.prototype,"inputClass",void 0),b([e.Input(),w("design:type",Object)],t.CompleterCmp.prototype,"autofocus",void 0),b([e.Output(),w("design:type",Object)],t.CompleterCmp.prototype,"selected",void 0),b([e.Output(),w("design:type",Object)],t.CompleterCmp.prototype,"highlighted",void 0),b([e.Output(),w("design:type",Object)],t.CompleterCmp.prototype,"blur",void 0),b([e.ViewChild(t.CtrCompleter),w("design:type",t.CtrCompleter)],t.CompleterCmp.prototype,"completer",void 0),t.CompleterCmp=b([e.Component({selector:"ng2-completer",template:'\n        <div class="completer-holder" ctrCompleter>\n            <input type="search" class="completer-input" ctrInput [ngClass]="inputClass" [(ngModel)]="searchStr" (ngModelChange)="onChange($event)" [attr.name]="inputName" [placeholder]="placeholder"\n                [attr.maxlength]="maxChars" [tabindex]="fieldTabindex" [disabled]="disableInput" [clearSelected]="clearSelected" [overrideSuggested]="overrideSuggested" \n                [fillHighlighted]="fillHighlighted" (blur)="onBlur()" [autofocus]="autofocus" autocomplete="off" autocorrect="off" autocapitalize="off" />\n\n            <div class="completer-dropdown-holder" *ctrList="dataService; minSearchLength: minSearchLength; pause: pause; autoMatch: autoMatch; let items = results; let searchActive = searching; let isInitialized = searchInitialized;">\n                <div class="completer-dropdown" ctrDropdown *ngIf="isInitialized">\n                    <div *ngIf="searchActive && displaySearching" class="completer-searching">{{textSearching}}</div>\n                    <div *ngIf="!searchActive && (!items || items.length === 0)" class="completer-no-results">{{textNoResults}}</div>\n                    <div class="completer-row-wrapper" *ngFor="let item of items; let rowIndex=index">\n                        <div class="completer-row" [ctrRow]="rowIndex" [dataItem]="item">\n                            <div *ngIf="item.image || item.image === \'\'" class="completer-image-holder">\n                                <img *ngIf="item.image != \'\'" src="{{item.image}}" class="completer-image" />\n                                <div *ngIf="item.image === \'\'" class="completer-image-default"></div>\n                            </div>\n                            <div class="completer-item-text" [ngClass]="{\'completer-item-text-image\': item.image || item.image === \'\' }">\n                                <completer-list-item class="completer-title" [text]="item.title" [matchClass]="matchClass" [searchStr]="searchStr" [type]="\'title\'"></completer-list-item>\n                                <completer-list-item *ngIf="item.description && item.description != \'\'" class="completer-description" [text]="item.description"\n                                    [matchClass]="matchClass" [searchStr]="searchStr" [type]="\'description\'">\n                                </completer-list-item>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ',styles:['\n    .completer-dropdown {\n        border-color: #ececec;\n        border-width: 1px;\n        border-style: solid;\n        border-radius: 2px;\n        width: 250px;\n        padding: 6px;\n        cursor: pointer;\n        z-index: 9999;\n        position: absolute;\n        margin-top: -6px;\n        background-color: #ffffff;\n    }\n\n    .completer-row {\n        padding: 5px;\n        color: #000000;\n        margin-bottom: 4px;\n        clear: both;\n        display: inline-block;\n        width: 103%;\n    }\n\n    .completer-selected-row {\n        background-color: lightblue;\n        color: #ffffff;\n    }\n\n    .completer-description {\n        font-size: 14px;\n    }\n\n    .completer-image-default {\n        width: 16px; \n        height: 16px;\n        background-image: url("demo/res/img/default.png");\n    }\n\n    .completer-image-holder {\n        float: left;\n        width: 10%;\n    }\n    .completer-item-text-image {\n        float: right;\n        width: 90%;\n    }\n    '],providers:[R]}),w("design:paramtypes",[])],t.CompleterCmp);var O=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},x=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=function(){function t(){this.parts=[]}return t.prototype.ngOnInit=function(){if(!this.searchStr)return void this.parts.push({isMatch:!1,text:this.text});for(var t=this.text.toLowerCase(),e=t.indexOf(this.searchStr.toLowerCase()),r=0;e>=0;){var i=this.text.slice(e,e+this.searchStr.length);if(0===e)this.parts.push({isMatch:!0,text:i}),r+=this.searchStr.length;else if(e>0){var o=this.text.slice(r,e);this.parts.push({isMatch:!1,text:o}),this.parts.push({isMatch:!0,text:i}),r+=this.searchStr.length+o.length}e=t.indexOf(this.searchStr.toLowerCase(),r)}r<this.text.length&&this.parts.push({isMatch:!1,text:this.text.slice(r,this.text.length)})},t}();O([e.Input(),x("design:type",String)],j.prototype,"text",void 0),O([e.Input(),x("design:type",String)],j.prototype,"searchStr",void 0),O([e.Input(),x("design:type",String)],j.prototype,"matchClass",void 0),O([e.Input(),x("design:type",String)],j.prototype,"type",void 0),j=O([e.Component({selector:"completer-list-item",template:'\n    <span class="completer-list-item-holder" [ngClass]="{\'completer-title\': type === \'title\', \'completer-description\': type === \'description\'}" >\n        <span class="completer-list-item" *ngFor="let part of parts" [ngClass]="part.isMatch ? matchClass : null">{{part.text}}</span>\n    </span>\n    '})],j);var I=function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},H=function(t){function e(){return t.call(this)||this}return I(e,t),e.prototype.cancel=function(){},e.prototype.searchFieldss=function(t){return this._searchFields=t,this},e.prototype.titleField=function(t){return this._titleField=t,this},e.prototype.descriptionField=function(t){return this._descriptionField=t,this},e.prototype.imageField=function(t){return this._imageField=t,this},e.prototype.extractMatches=function(t,e){var r=this,i=[],o=this._searchFields?this._searchFields.split(","):null;return i=""!=e?t.filter(function(t){var i=o?o.map(function(e){return r.extractValue(t,e)}).filter(function(t){return!!t}):[t];return i.some(function(t){return t.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0})}):t},e.prototype.extractTitle=function(t){var e=this;return this._titleField.split(",").map(function(r){return e.extractValue(t,r)}).join(" ")},e.prototype.extractValue=function(t,e){var r,i;if(e){r=e.split("."),i=t;for(var o=0;o<r.length;o++)i&&(i=i[r[o]])}else i=t;return i},e.prototype.processResults=function(t){var e,r,i,o="",n=null,s=[];if(t&&t.length>0)for(e=0;e<t.length;e++)r=this._titleField?this.extractTitle(t[e]):t[e],this._descriptionField&&(o=i=this.extractValue(t[e],this._descriptionField)),this._imageField&&(n=this.extractValue(t[e],this._imageField)),s.push({title:r,description:i,image:n,originalObject:t[e]});return s},e}(s.Subject),_=function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},L=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},T=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};t.LocalData=function(t){function e(){return t.call(this)||this}return _(e,t),e.prototype.data=function(t){var e=this;return t instanceof n.Observable?t.subscribe(function(t){e._data=t,e.savedTerm&&e.search(e.savedTerm)}):this._data=t,this},e.prototype.search=function(t){if(this._data){this.savedTerm=null;var e=this.extractMatches(this._data,t);this.next(this.processResults(e))}else this.savedTerm=t},e}(H),t.LocalData=L([e.Injectable(),T("design:paramtypes",[])],t.LocalData);var D=function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},F=function(t){function e(e){var r=t.call(this)||this;return r.http=e,r._urlFormater=null,r._dataField=null,r}return D(e,t),e.prototype.remoteUrl=function(t){return this._remoteUrl=t,this},e.prototype.urlFormater=function(t){this._urlFormater=t},e.prototype.dataField=function(t){this._dataField=t},e.prototype.headers=function(t){this._headers=t},e.prototype.search=function(t){var e=this;this.cancel();var r="";r=this._urlFormater?this._urlFormater(t):this._remoteUrl+encodeURIComponent(t),this.remoteSearch=this.http.get(r,{headers:this._headers||new i.Headers}).map(function(t){return t.json()}).map(function(r){var i=e.extractValue(r,e._dataField);return e.extractMatches(i,t)}).map(function(t){var r=e.processResults(t);return e.next(r),r}).catch(function(t){return e.error(t),null}).subscribe()},e.prototype.cancel=function(){this.remoteSearch&&this.remoteSearch.unsubscribe()},e}(H),M=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},k=function(t,e){return function(r,i){e(r,i,t)}};t.CompleterService=function(){function t(t,e){this.localDataFactory=t,this.remoteDataFactory=e}return t.prototype.local=function(t,e,r){void 0===e&&(e=""),void 0===r&&(r="");var i=this.localDataFactory();return i.data(t).searchFieldss(e).titleField(r)},t.prototype.remote=function(t,e,r){void 0===e&&(e=""),void 0===r&&(r="");var i=this.remoteDataFactory();return i.remoteUrl(t).searchFieldss(e).titleField(r)},t}(),t.CompleterService=M([e.Injectable(),k(0,e.Inject(t.LocalData)),k(1,e.Inject(F)),E("design:paramtypes",[Object,Object])],t.CompleterService);var P={provide:t.LocalData,useFactory:a},N={provide:F,useFactory:h,deps:[i.Http]},V=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},z=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},B=function(t,e){return function(r,i){e(r,i,t)}},q=function(){function t(t,e){this.row=t,this.index=e}return t}();t.CtrDropdown=function(){function t(t,e){this.completer=t,this.el=e,this.rows=[],this.completer.registerDropdown(this)}return t.prototype.ngOnInit=function(){var t=getComputedStyle(this.el.nativeElement);this.isScrollOn=t.maxHeight&&"auto"===t.overflowY},t.prototype.ngOnDestroy=function(){this.completer.registerDropdown(null)},t.prototype.registerRow=function(t){this.rows.push(t)},t.prototype.highlightRow=function(t){var e=this.rows.find(function(e){return e.index===t});return t<0?(this.currHighlited&&this.currHighlited.row.setHighlited(!1),this.currHighlited=void 0,void this.completer.onHighlighted(null)):void(e&&(this.currHighlited&&this.currHighlited.row.setHighlited(!1),this.currHighlited=e,this.currHighlited.row.setHighlited(!0),this.completer.onHighlighted(this.currHighlited.row.getDataItem())))},t.prototype.clear=function(){this.rows=[]},t.prototype.onSelected=function(t){this.completer.onSelected(t)},t.prototype.selectCurrent=function(){this.currHighlited?this.onSelected(this.currHighlited.row.getDataItem()):this.rows.length>0&&this.onSelected(this.rows[0].row.getDataItem())},t.prototype.nextRow=function(){var t=0;if(this.currHighlited&&(t=this.currHighlited.index+1),this.highlightRow(t),this.isScrollOn&&this.currHighlited){var e=this.currHighlited.row.getNativeElement();this.dropdownHeight()<e.getBoundingClientRect().bottom&&this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(e))}},t.prototype.prevRow=function(){var t=-1;if(this.currHighlited&&(t=this.currHighlited.index-1),this.highlightRow(t),this.isScrollOn&&this.currHighlited){var e=this.dropdownRowTop();e<0&&this.dropdownScrollTopTo(e-1)}},t.prototype.dropdownScrollTopTo=function(t){this.el.nativeElement.scrollTop=this.el.nativeElement.scrollTop+t},t.prototype.dropdownRowTop=function(){return this.currHighlited.row.getNativeElement().getBoundingClientRect().top-(this.el.nativeElement.getBoundingClientRect().top+parseInt(getComputedStyle(this.el.nativeElement).paddingTop,10))},t.prototype.dropdownHeight=function(){return this.el.nativeElement.getBoundingClientRect().top+parseInt(getComputedStyle(this.el.nativeElement).maxHeight,10)},t.prototype.dropdownRowOffsetHeight=function(t){var e=getComputedStyle(t);return t.offsetHeight+parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)},t}(),t.CtrDropdown=V([e.Directive({selector:"[ctrDropdown]"}),B(0,e.Host()),z("design:paramtypes",[t.CtrCompleter,e.ElementRef])],t.CtrDropdown);var A=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},U=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},$=function(t,e){return function(r,i){e(r,i,t)}},G=40,Y=39,J=38,K=37,Q=27,W=13,X=9;t.CtrInput=function(){function t(t,r){var i=this;this.completer=t,this.ngModel=r,this.clearSelected=!1,this.overrideSuggested=!1,this.fillHighlighted=!0,this.ngModelChange=new e.EventEmitter,this._searchStr="",this._displayStr="",this.completer.selected.subscribe(function(t){t&&(i.clearSelected?i.searchStr="":i.searchStr=t.title,i.ngModelChange.emit(i.searchStr))}),this.completer.highlighted.subscribe(function(t){i.fillHighlighted&&(t?(i._displayStr=t.title,i.ngModelChange.emit(t.title)):(i._displayStr=i.searchStr,i.ngModelChange.emit(i.searchStr)))}),this.ngModel.valueChanges.subscribe(function(t){i._displayStr!=t&&(i.searchStr=t)})}return t.prototype.keyupHandler=function(t){if(t.keyCode!==K&&t.keyCode!==Y&&t.keyCode!==X)if(t.keyCode===J||t.keyCode===W)t.preventDefault();else if(t.keyCode===G)t.preventDefault(),this.completer.search(this.searchStr);else if(t.keyCode===Q)this.restoreSearchValue(),this.completer.clear();else{if(!this.searchStr)return this.completer.onSelected(null),void this.completer.clear();this.completer.search(this.searchStr)}},t.prototype.keydownHandler=function(t){t.keyCode===W?(this.completer.hasHighlited()&&t.preventDefault(),this.handleSelection()):t.keyCode===G?(t.preventDefault(),this.completer.nextRow()):t.keyCode===J?(t.preventDefault(),this.completer.prevRow()):t.keyCode===X?this.handleSelection():t.keyCode===Q&&t.preventDefault()},t.prototype.onBlur=function(t){var e=this;setTimeout(function(){e.overrideSuggested?e.completer.onSelected({title:e.searchStr,originalObject:null}):e.restoreSearchValue(),e.completer.clear()},200)},Object.defineProperty(t.prototype,"searchStr",{get:function(){return this._searchStr},set:function(t){this._searchStr=t,this._displayStr=t},enumerable:!0,configurable:!0}),t.prototype.handleSelection=function(){this.overrideSuggested?this.completer.onSelected({title:this.searchStr,originalObject:null}):this.completer.hasHighlited()?this.completer.selectCurrent():this.completer.clear()},t.prototype.restoreSearchValue=function(){this.fillHighlighted&&this._displayStr!=this.searchStr&&(this._displayStr=this.searchStr,this.ngModelChange.emit(this.searchStr))},t}(),A([e.Input("clearSelected"),U("design:type",Object)],t.CtrInput.prototype,"clearSelected",void 0),A([e.Input("overrideSuggested"),U("design:type",Object)],t.CtrInput.prototype,"overrideSuggested",void 0),A([e.Input("fillHighlighted"),U("design:type",Object)],t.CtrInput.prototype,"fillHighlighted",void 0),A([e.Output(),U("design:type",e.EventEmitter)],t.CtrInput.prototype,"ngModelChange",void 0),A([e.HostListener("keyup",["$event"]),U("design:type",Function),U("design:paramtypes",[Object]),U("design:returntype",void 0)],t.CtrInput.prototype,"keyupHandler",null),A([e.HostListener("keydown",["$event"]),U("design:type",Function),U("design:paramtypes",[Object]),U("design:returntype",void 0)],t.CtrInput.prototype,"keydownHandler",null),A([e.HostListener("blur",["$event"]),U("design:type",Function),U("design:paramtypes",[Object]),U("design:returntype",void 0)],t.CtrInput.prototype,"onBlur",null),t.CtrInput=A([e.Directive({selector:"[ctrInput]"}),$(0,e.Host()),U("design:paramtypes",[t.CtrCompleter,r.NgModel])],t.CtrInput);var Z=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},tt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},et=function(t,e){return function(r,i){e(r,i,t)}},rt=function(){function t(t,e,r){this.results=t,this.searching=e,this.searchInitialized=r}return t}();t.CtrList=it=function(){function t(t,e,r,i){this.completer=t,this.templateRef=e,this.viewContainer=r,this.cd=i,this.ctrListMinSearchLength=m,this.ctrListPause=g,this.ctrListAutoMatch=!1,this.term=null,this.searchTimer=null,this.clearTimer=null,this.ctx=new rt([],!1,!1)}return t.hasTerm=function(t){return t||""===t},t.prototype.ngOnInit=function(){this.completer.registerList(this),this.viewContainer.createEmbeddedView(this.templateRef,new rt([],!1,!1))},Object.defineProperty(t.prototype,"dataService",{set:function(t){var e=this;this._dataService=t,this._dataService&&this._dataService.catch(function(t){return e.handleError(t)}).subscribe(function(t){e.ctx.searchInitialized=!0,e.ctx.searching=!1,e.ctx.results=t,e.ctrListAutoMatch&&1===t.length&&t[0].title&&it.hasTerm(e.term)&&t[0].title.toLocaleLowerCase()===e.term.toLocaleLowerCase()&&e.completer.onSelected(t[0]),e.refreshTemplate()})},enumerable:!0,configurable:!0}),t.prototype.search=function(t){var e=this;it.hasTerm(t)&&t.length>=this.ctrListMinSearchLength&&this.term!==t&&(this.searchTimer&&(this.searchTimer.unsubscribe(),this.searchTimer=null),this.ctx.searching||(this.ctx.results=[],this.ctx.searching=!0,this.ctx.searchInitialized=!0,this.refreshTemplate()),this.clearTimer&&this.clearTimer.unsubscribe(),this.searchTimer=l.Observable.timer(this.ctrListPause).subscribe(function(){e.searchTimerComplete(t)}))},t.prototype.clear=function(){var t=this;this.searchTimer&&this.searchTimer.unsubscribe(),this.clearTimer=l.Observable.timer(C).subscribe(function(){t._clear()})},t.prototype._clear=function(){this.searchTimer&&(this.searchTimer.unsubscribe(),this.searchTimer=null),this.dataService&&this.dataService.cancel(),this.ctx.results=[],this.ctx.searchInitialized=!1,this.term=null,this.viewContainer.clear()},t.prototype.searchTimerComplete=function(t){return!it.hasTerm(t)||t.length<this.ctrListMinSearchLength?void(this.ctx.searching=!1):(this.term=t,void this._dataService.search(t))},t.prototype.handleError=function(t){this.ctx.searching=!1;var e="search error";return t&&(e=t.message?t.message:t.status?t.status+" - "+t.statusText:"Server error"),console&&console.error&&console.error(e),this.refreshTemplate(),l.Observable.throw(e)},t.prototype.refreshTemplate=function(){this.viewContainer.clear(),this.viewContainer.createEmbeddedView(this.templateRef,this.ctx),this.cd.markForCheck()},t}(),Z([e.Input(),tt("design:type",Object)],t.CtrList.prototype,"ctrListMinSearchLength",void 0),Z([e.Input(),tt("design:type",Object)],t.CtrList.prototype,"ctrListPause",void 0),Z([e.Input(),tt("design:type",Object)],t.CtrList.prototype,"ctrListAutoMatch",void 0),Z([e.Input("ctrList"),tt("design:type",Object),tt("design:paramtypes",[Object])],t.CtrList.prototype,"dataService",null),t.CtrList=it=Z([e.Directive({selector:"[ctrList]"}),et(0,e.Host()),tt("design:paramtypes",[t.CtrCompleter,e.TemplateRef,e.ViewContainerRef,e.ChangeDetectorRef])],t.CtrList);var it,ot=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},nt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},st=function(t,e){return function(r,i){e(r,i,t)}};t.CtrRow=function(){function t(t,e,r){this.el=t,this.renderer=e,this.dropdown=r,this.selected=!1}return t.prototype.ngOnInit=function(){this.dropdown.registerRow(new q(this,this._rowIndex))},Object.defineProperty(t.prototype,"ctrRow",{set:function(t){this._rowIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataItem",{set:function(t){this._item=t},enumerable:!0,configurable:!0}),t.prototype.onClick=function(t){this.dropdown.onSelected(this._item)},t.prototype.onMouseEnter=function(t){this.dropdown.highlightRow(this._rowIndex)},t.prototype.setHighlited=function(t){this.selected=t,this.renderer.setElementClass(this.el.nativeElement,"completer-selected-row",this.selected)},t.prototype.getNativeElement=function(){return this.el.nativeElement},t.prototype.getDataItem=function(){return this._item},t}(),ot([e.Input(),nt("design:type",Number),nt("design:paramtypes",[Number])],t.CtrRow.prototype,"ctrRow",null),ot([e.Input(),nt("design:type",Object),nt("design:paramtypes",[Object])],t.CtrRow.prototype,"dataItem",null),ot([e.HostListener("click",["$event"]),nt("design:type",Function),nt("design:paramtypes",[Object]),nt("design:returntype",void 0)],t.CtrRow.prototype,"onClick",null),ot([e.HostListener("mouseenter",["$event"]),nt("design:type",Function),nt("design:paramtypes",[Object]),nt("design:returntype",void 0)],t.CtrRow.prototype,"onMouseEnter",null),t.CtrRow=ot([e.Directive({selector:"[ctrRow]"}),st(2,e.Host()),nt("design:paramtypes",[e.ElementRef,e.Renderer,t.CtrDropdown])],t.CtrRow);var ct=function(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s};t.Ng2CompleterModule=function(){function t(){}return t}(),t.Ng2CompleterModule=ct([e.NgModule({imports:[p.CommonModule,r.FormsModule,i.HttpModule],declarations:[j,t.CtrCompleter,t.CtrDropdown,t.CtrInput,t.CtrList,t.CtrRow,t.CompleterCmp],exports:[t.CompleterCmp,j,t.CtrCompleter,t.CtrDropdown,t.CtrInput,t.CtrList,t.CtrRow],providers:[t.CompleterService,P,N]})],t.Ng2CompleterModule),t.RemoteData=F,t.CompleterBaseData=H,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-completer.umd.js.map
